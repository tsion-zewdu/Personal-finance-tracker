<!-- Add/Edit Transaction Modal -->
<div id="transaction-modal" class="modal-container" style="display: none;">
    <div class="bg-white rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto">
        <div class="sticky top-0 bg-white border-b border-slate-200 px-6 py-4 flex items-center justify-between">
            <h2 id="transaction-modal-title" class="text-xl font-bold text-slate-900">Add Transaction</h2>
            <button type="button" id="close-transaction-modal" class="text-slate-400 hover:text-slate-600 text-2xl leading-none focus:outline-none focus:ring-2 focus:ring-blue-500">
                √ó
            </button>
        </div>
        
        <form id="transaction-form" method="post" class="p-6 space-y-4">
            {% csrf_token %}
            <input type="hidden" id="transaction-id" name="transaction_id">
            
            <div>
                <label class="block text-sm font-medium text-slate-700 mb-2">Transaction Type</label>
                <div class="flex gap-3">
                    <label class="flex-1 cursor-pointer">
                        <input type="radio" name="transaction-type" value="income" class="peer sr-only" id="income-type">
                        <div class="peer-checked:bg-green-100 peer-checked:border-green-600 peer-checked:text-green-700 border-2 border-slate-300 rounded-lg px-4 py-3 text-center hover:bg-slate-50 transition-colors">
                            <span class="text-2xl block mb-1">üí∞</span>
                            <span class="text-sm font-semibold">Income</span>
                        </div>
                    </label>
                    <label class="flex-1 cursor-pointer">
                        <input type="radio" name="transaction-type" value="expense" class="peer sr-only" id="expense-type" checked>
                        <div class="peer-checked:bg-red-100 peer-checked:border-red-600 peer-checked:text-red-700 border-2 border-slate-300 rounded-lg px-4 py-3 text-center hover:bg-slate-50 transition-colors">
                            <span class="text-2xl block mb-1">üí∏</span>
                            <span class="text-sm font-semibold">Expense</span>
                        </div>
                    </label>
                </div>
            </div>
            
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <div>
                    <label for="transaction-amount" class="block text-sm font-medium text-slate-700 mb-1">
                        Amount
                    </label>
                    <input type="number" id="transaction-amount" name="amount" required min="0.01" step="0.01" 
                           placeholder="0.00" class="w-full px-4 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                </div>
                <div>
                    <label for="transaction-date" class="block text-sm font-medium text-slate-700 mb-1">Date</label>
                    <input type="date" id="transaction-date" name="date" required 
                           class="w-full px-4 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                </div>
            </div>
            
            <div>
                <label for="transaction-category" class="block text-sm font-medium text-slate-700 mb-1">Category</label>
                <select id="transaction-category" name="category" required 
                        class="w-full px-4 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                    <option value="">Select category...</option>
                    <!-- Categories will be populated by JavaScript -->
                </select>
            </div>
            
            <div>
                <label for="transaction-description" class="block text-sm font-medium text-slate-700 mb-1">Description</label>
                <input type="text" id="transaction-description" name="description" 
                       placeholder="e.g., Grocery shopping" 
                       class="w-full px-4 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
            </div>
            
            <div>
                <label for="transaction-payment" class="block text-sm font-medium text-slate-700 mb-1">
                    Payment Method
                </label>
                <select id="transaction-payment" name="payment_method" 
                        class="w-full px-4 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                    <option value="cash">Cash</option>
                    <option value="card">Credit/Debit Card</option>
                    <option value="bank">Bank Transfer</option>
                    <option value="mobile">Mobile Payment</option>
                    <option value="other">Other</option>
                </select>
            </div>
            
            <div class="flex gap-3 pt-4">
                <button type="submit" id="save-transaction-btn" 
                        class="flex-1 py-3 bg-blue-600 hover:bg-blue-700 text-white font-semibold rounded-lg transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500">
                    Save Transaction
                </button>
                <button type="button" id="cancel-transaction-btn" 
                        class="px-6 py-3 bg-slate-200 hover:bg-slate-300 text-slate-700 font-semibold rounded-lg transition-colors focus:outline-none focus:ring-2 focus:ring-slate-500">
                    Cancel
                </button>
            </div>
        </form>
    </div>
</div>

<!-- Add/Edit Category Modal -->
<div id="category-modal" class="modal-container" style="display: none;">
    <div class="bg-white rounded-2xl shadow-2xl max-w-md w-full">
        <div class="border-b border-slate-200 px-6 py-4 flex items-center justify-between">
            <h2 id="category-modal-title" class="text-xl font-bold text-slate-900">Add Category</h2>
            <button type="button" id="close-category-modal" class="text-slate-400 hover:text-slate-600 text-2xl leading-none focus:outline-none focus:ring-2 focus:ring-blue-500">
                √ó
            </button>
        </div>
        
        <form id="category-form" method="post" class="p-6 space-y-4">
            {% csrf_token %}
            <input type="hidden" id="category-id" name="category_id">
            
            <div>
                <label class="block text-sm font-medium text-slate-700 mb-2">Category Type</label>
                <div class="flex gap-3">
                    <label class="flex-1 cursor-pointer">
                        <input type="radio" name="category-type" value="expense" class="peer sr-only" id="category-expense" checked>
                        <div class="peer-checked:bg-red-100 peer-checked:border-red-600 border-2 border-slate-300 rounded-lg px-4 py-2 text-center cursor-pointer focus:outline-none focus:ring-2 focus:ring-blue-500">
                            <span class="text-sm font-semibold text-slate-700 peer-checked:text-red-700">Expense</span>
                        </div>
                    </label>
                    <label class="flex-1 cursor-pointer">
                        <input type="radio" name="category-type" value="income" class="peer sr-only" id="category-income">
                        <div class="peer-checked:bg-green-100 peer-checked:border-green-600 border-2 border-slate-300 rounded-lg px-4 py-2 text-center cursor-pointer focus:outline-none focus:ring-2 focus:ring-blue-500">
                            <span class="text-sm font-semibold text-slate-700 peer-checked:text-green-700">Income</span>
                        </div>
                    </label>
                </div>
            </div>
            
            <div>
                <label for="category-name" class="block text-sm font-medium text-slate-700 mb-1">Category Name</label>
                <input type="text" id="category-name" name="name" required placeholder="e.g., Groceries" 
                       class="w-full px-4 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
            </div>
            
            <div>
                <label for="category-icon" class="block text-sm font-medium text-slate-700 mb-1">Icon (emoji)</label>
                <input type="text" id="category-icon" name="icon" placeholder="üõí" maxlength="2" 
                       class="w-full px-4 py-2 border border-slate-300 rounded-lg text-2xl text-center focus:outline-none focus:ring-2 focus:ring-blue-500">
            </div>
            
            <div id="category-budget-field">
                <label for="category-budget" class="block text-sm font-medium text-slate-700 mb-1">
                    Monthly Budget (optional)
                </label>
                <input type="number" id="category-budget" name="monthly_budget" min="0" step="0.01" 
                       placeholder="0.00" class="w-full px-4 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
            </div>
            
            <div class="flex gap-3 pt-4">
                <button type="submit" class="flex-1 py-3 bg-green-600 hover:bg-green-700 text-white font-semibold rounded-lg transition-colors focus:outline-none focus:ring-2 focus:ring-green-500">
                    Save Category
                </button>
                <button type="button" id="cancel-category-btn" 
                        class="px-6 py-3 bg-slate-200 hover:bg-slate-300 text-slate-700 font-semibold rounded-lg transition-colors focus:outline-none focus:ring-2 focus:ring-slate-500">
                    Cancel
                </button>
            </div>
        </form>
    </div>
</div>

<!-- Delete Confirmation Modal -->
<div id="delete-modal" class="modal-container" style="display: none;">
    <div class="bg-white rounded-2xl shadow-2xl max-w-md w-full p-6">
        <div class="text-center mb-6">
            <div class="inline-flex items-center justify-center w-16 h-16 rounded-full bg-red-100 mb-4">
                <span class="text-3xl">‚ö†Ô∏è</span>
            </div>
            <h2 class="text-xl font-bold text-slate-900 mb-2">Confirm Deletion</h2>
            <p id="delete-message" class="text-sm text-slate-600">
                Are you sure you want to delete this item? This action cannot be undone.
            </p>
        </div>
        <div class="flex gap-3">
            <button id="confirm-delete-btn" 
                    class="flex-1 py-3 bg-red-600 hover:bg-red-700 text-white font-semibold rounded-lg transition-colors focus:outline-none focus:ring-2 focus:ring-red-500">
                Delete
            </button>
            <button id="cancel-delete-btn" 
                    class="flex-1 py-3 bg-slate-200 hover:bg-slate-300 text-slate-700 font-semibold rounded-lg transition-colors focus:outline-none focus:ring-2 focus:ring-slate-500">
                Cancel
            </button>
        </div>
    </div>
</div>